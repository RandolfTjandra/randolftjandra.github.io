<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>Git Commit | Randolf Tjandra</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="I come from experience where the work we did was documented on Jira. The task description, requirements, and QA procedure were all recorded there. This is useful as non developer stakeholders usually do not have access to a project&rsquo;s git commit history. Besides, who wants to navigate through git just to see what work is being done?
I like to think that commit messages should be as succinct as possible. It should only describe the content of the work.">
<meta name="generator" content="Hugo 0.124.1">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

 
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D56P867SKS"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-D56P867SKS', { 'anonymize_ip': false });
}
</script>








  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">‚Üê</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
	  <a class="button" href="http://localhost:1313/index.xml">Subscribe</a>
	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">Git Commit</h1>

    <div class="tip">
        <time datetime="2024-03-31 13:51:28 -0700 PDT">Mar 31, 2024</time>
        <span class="split">
          ¬∑
        </span>
        <span>
          610 words
        </span>
        <span class="split">
          ¬∑
        </span>
        <span>
          3 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#commit-message">Commit Message</a></li>
    <li><a href="#git-hooks">Git hooks</a></li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <p>I come from experience where the work we did was documented on Jira. The task description, requirements, and QA procedure were all recorded there. This is useful as non developer stakeholders usually do not have access to a project&rsquo;s git commit history. Besides, who wants to navigate through git just to see what work is being done?</p>
<p>I like to think that commit messages should be as succinct as possible. It should only describe the content of the work. Additional information such as how to test this work, detailed changes, should all go into your project management software issues or other documentation. When a commit message has to spend multiple sentences describing its content, that says a lot about your team&rsquo;s approach to planning work. Your commit probably would benefit from being split up.</p>
<p>With smaller commits, pull requests will be quicker because they&rsquo;re focused on a singular task. QA becomes more straightforward because you&rsquo;re narrowing down the area of concern. You simplify the hypothetical process of reverting your changes in the rare case something goes awry. Overall you improve the health of your project&rsquo;s commit history as it becomes more iterative and readable, and you reduce the time it takes for your work to reach production because there are fewer barriers to get through.</p>
<p>Imagine the opposite scenario where you and your team plan out an entire project into a single commit, waterfall style. As you develop the project you also spot areas where code can be improved so you start doing refactors as well. Over time your project branch drifts against main, which will potentially make it difficult to merge your work later.</p>
<p>The refactors could have happened separately and merged sooner. That&rsquo;s something all contributors would benefit from. The fact that these irrelevant changes came up during your work could be indication that you&rsquo;ve been on this branch for too long, going back to what I said about being able to succinctly describe your work in your commit message.</p>
<p>I&rsquo;ll talk about how I think tasks should be designed in another post.</p>
<h2 id="commit-message">Commit Message <a href="#commit-message" class="anchor">üîó</a></h2><p>Below is my .gitmessage file.  The first line is reserved for a single sentence describing what the contents of the commit. Issue refers to the project issue that the commit is addressing. Reviewer is a list of names of people who reviewed the code. Any additional context that&rsquo;s necessary should come after.</p>
<p>I don&rsquo;t think the reviewer line is totally necessary if you&rsquo;d prefer to just refer to the pull request for this information.</p>
<p>My preference is for commit messages to be in imperative verb form.</p>
<blockquote>
<p>Eg. Fix issue where transactions are attributed to the wrong user</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Issue: none
</span></span><span style="display:flex;"><span>Reviewer: pending
</span></span></code></pre></div><p>This is my prepare-commit-msg file (chmod +x this file).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#080">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span><span style="color:#080;font-style:italic">#</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># Assumes branches follow the format `draft-[project]-[ticket_number]`</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># Also assumes you&#39;re using the standard gitmessage</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">#</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"># Converts branch name into Issue ticket</span>
</span></span><span style="display:flex;"><span>sed -i.bak <span style="color:#b44">&#34;s/Issue: none/Issue: </span><span style="color:#a2f;font-weight:bold">$(</span>git branch | grep <span style="color:#b44">&#39;*&#39;</span> | sed -E <span style="color:#b44">&#39;s/\* //;s/([a-zA-Z]+-[0-9]+).*/\1/&#39;</span> | tr <span style="color:#b44">&#39;[:lower:]&#39;</span> <span style="color:#b44">&#39;[:upper:]&#39;</span><span style="color:#a2f;font-weight:bold">)</span><span style="color:#b44">/&#34;</span> <span style="color:#b44">&#34;</span><span style="color:#b8860b">$1</span><span style="color:#b44">&#34;</span>
</span></span></code></pre></div><p>My workflow is: I go to my project management software, get my current task identifier (which follows the format eg. project-123), create a new branch with that as its name, then have my commits automatically tag the commit message with that issue identifier.</p>
<p>eg.
When my branch name is work-435, prepare-commit-msg formats my commit message to:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Issue: WORK-435
</span></span><span style="display:flex;"><span>Reviewer: none
</span></span></code></pre></div><h2 id="git-hooks">Git hooks <a href="#git-hooks" class="anchor">üîó</a></h2><p>An additional thing I have set up are the follow lines in my .gitconfig.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[core]
</span></span><span style="display:flex;"><span>  hooksPath = ~/.git-hooks
</span></span></code></pre></div><p>.git-hooks/ contains my prepare-commit-msg file.
When I run git init in any of my git repos, it&rsquo;ll run my hooks if present before it looks for a local copy.</p>

    </div>

    
    
    

</section>


    </main>
    
    <footer id="footer">
    
        <div id="social">


    <a class="symbol" href="https://www.github.com/randolftjandra" rel="me" target="_blank">
        
        <svg fill="#bbbbbb" width="28" height="28"  viewBox="0 0 72 72" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
    <title>Github</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Social-Icons---Rounded-Black" transform="translate(-264.000000, -939.000000)">
            <g id="Github" transform="translate(264.000000, 939.000000)">
                <path d="M8,72 L64,72 C68.418278,72 72,68.418278 72,64 L72,8 C72,3.581722 68.418278,-8.11624501e-16 64,0 L8,0 C3.581722,8.11624501e-16 -5.41083001e-16,3.581722 0,8 L0,64 C5.41083001e-16,68.418278 3.581722,72 8,72 Z" id="Rounded" fill="#bbbbbb"></path>
                <path d="M35.9985,13 C22.746,13 12,23.7870921 12,37.096644 C12,47.7406712 18.876,56.7718301 28.4145,59.9584121 C29.6145,60.1797862 30.0525,59.4358488 30.0525,58.7973276 C30.0525,58.2250681 30.0315,56.7100863 30.0195,54.6996482 C23.343,56.1558981 21.9345,51.4693938 21.9345,51.4693938 C20.844,48.6864054 19.2705,47.9454799 19.2705,47.9454799 C17.091,46.4500754 19.4355,46.4801943 19.4355,46.4801943 C21.843,46.6503662 23.1105,48.9634994 23.1105,48.9634994 C25.2525,52.6455377 28.728,51.5823398 30.096,50.9649018 C30.3135,49.4077535 30.9345,48.3460615 31.62,47.7436831 C26.2905,47.1352808 20.688,45.0691228 20.688,35.8361671 C20.688,33.2052792 21.6225,31.0547881 23.1585,29.3696344 C22.911,28.7597262 22.0875,26.3110578 23.3925,22.9934585 C23.3925,22.9934585 25.4085,22.3459017 29.9925,25.4632101 C31.908,24.9285993 33.96,24.6620468 36.0015,24.6515052 C38.04,24.6620468 40.0935,24.9285993 42.0105,25.4632101 C46.5915,22.3459017 48.603,22.9934585 48.603,22.9934585 C49.9125,26.3110578 49.089,28.7597262 48.8415,29.3696344 C50.3805,31.0547881 51.309,33.2052792 51.309,35.8361671 C51.309,45.0917119 45.6975,47.1292571 40.3515,47.7256117 C41.2125,48.4695491 41.9805,49.9393525 41.9805,52.1877301 C41.9805,55.4089489 41.9505,58.0067059 41.9505,58.7973276 C41.9505,59.4418726 42.3825,60.1918338 43.6005,59.9554002 C53.13,56.7627944 60,47.7376593 60,37.096644 C60,23.7870921 49.254,13 35.9985,13" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg>
    </a>


</div>

    

    <div class="copyright">
    
       ¬© Copyright 
       2024 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       Randolf Tjandra
    
    </div>

    
</footer>



  </body>
</html>
